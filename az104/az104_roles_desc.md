# Azure RBAC 内置角色与自定义角色说明

在 Azure RBAC (基于角色的访问控制) 中，**内置角色不能被修改**。这是 Azure RBAC 的一个重要设计特性。

---

## 关键点总结

- **内置角色不可修改**  
  Azure 提供的默认内置角色（如"所有者"、"参与者"、"读者"等）的权限定义是固定的，用户无法直接编辑或删除这些角色的权限。

- **自定义角色是替代方案**  
  如果内置角色不满足需求，可以在订阅或管理组级别创建自定义角色，通过组合精确的权限集来实现特定需求。

---

## 内置角色的特点

- 由 Microsoft 统一维护和更新。
- 覆盖常见管理场景（如虚拟机管理、网络配置等）。
- 角色定义包括 Actions（允许的操作）和 NotActions（排除的操作）。

---

## 例外情况

- 虽然不能修改内置角色，但可以通过 **Azure Policy** 或 **资源锁** 进一步限制权限。

---

## 为什么这样设计？

- **安全性**：防止误操作导致权限混乱。
- **一致性**：确保所有用户和订阅中的内置角色行为一致。
- **可维护性**：Microsoft 可以集中更新角色以适应新服务或功能。

---

## 实际应用建议

- **使用内置角色**：优先尝试用内置角色满足需求（如"虚拟机参与者"、"存储账户参与者"等）。
- **创建自定义角色**：如果权限需求特殊，通过以下命令创建自定义角色：

  ```powershell
  az role definition create --role-definition @custom-role.json
  ```
  其中 custom-role.json 文件定义权限和分配范围。

- **查看内置角色定义**：

  ```powershell
  az role definition list --query "[?roleType=='BuiltInRole']"
  ```

---

## 常见混淆点澄清

- **角色分配 ≠ 角色修改**：  
  你可以将内置角色分配给用户/组/服务主体（这是允许的），但不能修改角色本身的权限定义。

- **管理组与订阅范围**：  
  自定义角色只能在订阅或管理组级别创建，而内置角色在所有级别可用。

- 如果需要更细粒度的权限控制，建议结合 **Azure Policy** 和 **资源锁