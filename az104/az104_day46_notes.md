
# AZ-104 学习笔记 - Day 46

## 🗂️ Azure Managed Disk 类型比较

| 类型            | 性能特点                          | 适用场景                         |
|-----------------|-----------------------------------|----------------------------------|
| Standard HDD    | 成本最低、延迟较高                | 备份、不频繁访问数据             |
| Standard SSD    | 延迟适中、经济型 SSD              | Web 服务器、Dev/Test             |
| Premium SSD     | 高 IOPS、低延迟                   | 数据库、业务关键型应用           |
| Ultra Disk      | 超高性能、支持动态调整 IOPS/吞吐  | 超高性能 DB、低延迟分析应用       |

> ✅ Ultra Disk 需搭配特定 VM SKU，支持在线调整性能目标。

---

## 📸 快照（Snapshot）与映像（Image）

| 功能     | 快照（Snapshot）                          | 映像（Image）                          |
|----------|--------------------------------------------|----------------------------------------|
| 作用     | 保存单个磁盘某时刻状态                     | 用于创建一致的新 VM                     |
| 类型     | 增量快照（节省成本）                       | 映像模板可包含多个磁盘和配置             |
| 使用场景 | 变更/升级回滚、测试                        | 多 VM 部署、一键复制环境                |

> 📌 快照适用于备份与恢复，映像更适合大规模一致性部署。

---

## 🔐 Azure Disk Encryption (ADE)

- **加密方式**：双重加密（平台 + 客户密钥）  
- **支持 OS**：Windows / Linux  
- **密钥管理**：通过 Azure Key Vault（支持 BYOK）  
- **启用方式**：在磁盘或 VM 层面配置

> ❌ ADE 不适用于 Archive Blob，只针对 Managed Disk

---

## 💾 Azure Backup Vault 亮点

- 支持 VM / SQL / 文件 / Azure Files 等资源的自动备份
- 可设定策略：保留期、备份频率、启动时间
- **支持 Geo 恢复（跨区域）**  
- 与原始资源计费分离，按实际备份容量计费
- 支持无代理备份（Agentless）

---

## 🧪 小测验复盘（得分：13 / 20）

### 问题 1：磁盘类型  
✅ A, B  
❌ C：HDD 不适合延迟敏感  
❌ D：Premium SSD 比 Standard SSD 更贵且性能高

### 问题 2：快照与映像  
✅ A, B, C, D （全部正确）

### 问题 3：磁盘加密  
✅ A, B, C  
❌ D：Archive Storage 不适用 ADE

### 问题 4：Backup Vault  
✅ A, B  
❌ C：支持 Geo 恢复  
❌ D：现代 VM 不需代理

### 问题 5：快照用途  
✅ A, C  
❌ B：多区域部署推荐映像  
❌ D：VMSS 应用映像

---

## 🔜 下一步预告 - Day 47 模块

| 模块             | 内容说明                            |
|------------------|-------------------------------------|
| Azure Policy      | 资源一致性保障与策略定义             |
| Blueprint（已废弃） | 简要了解遗留政策包机制                 |
| 使用政策实现合规性 | 限制 SKU、限定 Region、自动打标签等    |
